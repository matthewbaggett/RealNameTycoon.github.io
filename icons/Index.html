<!DOCTYPE html>
<head>
    <title></title>
    <meta charset="utf-8">
    <script type="text/javascript">

        function e(id) { return document.getElementById(id);}

        function div(n,d) { return Math.floor(n / d);}

        // Skaff den relative museposisjonen.
        // Hentet fra http://www.html5canvastutorials.com/advanced/html5-canvas-mouse-coordinates/
        function getMousePos(canvas, evt) {
            var rect = canvas.getBoundingClientRect();
            return {
                x: evt.clientX - rect.left,
                y: evt.clientY - rect.top
            };
        }

        window.onload = function() {

            var ctx = e("canvas").getContext("2d");

            e("canvas").height = "2688";
            e("canvas").width = "2688";
            e("canvas").onmousemove = build;

            // Utfør handling basert på inndata fra museevent
            function build(ev) {
                var img = e("road");
				ctx.beginPath();
				ctx.rect(0,0,2624+64,2624+64);
				ctx.fillStyle="white";
				ctx.fill();
				ctx.drawImage(img,0,0);
				var pos = getMousePos(e("canvas"),ev);
				var xx = div(pos.x,64);
				var yy = div(pos.y,64);
				ctx.beginPath();
				ctx.lineWidth="6";
				ctx.strokeStyle="black";
				ctx.rect(xx*64,yy*64,64,64);
				ctx.stroke();
				ctx.font="20px Arial";
				ctx.lineWidth="2";
				ctx.strokeStyle="black";
				ctx.fillStyle="black";
				ctx.fillText("x:"+xx+" y:"+yy,xx*64,yy*64+64+32);
                return false;
            }
			build(0);
        }

    </script>

    <style>
        textarea {
            width: 100%;
            height: 100%;
        }
        select {
            font-family: monospace;
        }
        .box {
            border: 1px solid black;
            padding: 5px 10px 5px 10px;
        }
		#canvas {
			margin: 20px;
		}
        code {
            display: block;
            background-color: lightgray;
            margin-left: 20px;
            padding: 10px;
            font-family: monospace;
        }
    </style>
</head>
<body>
	<h1>Transport Tycoon Playerlist Emoji List</h1>
	<h3>Type /icon in chat and enter the X then Y of the icon in the input boxes.</h3>
    <canvas id="canvas" width="640" height="480"></canvas>
    <img id="road" hidden="hidden" src="emojione.sprites.png">
</body></div>
